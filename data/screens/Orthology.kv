ShowcaseScreen:
    name: "Orthology"

    BoxLayout:
        orientation: "vertical"

        BoxLayout:
            size_hint_y: None
            height: 50
            padding: (5, 5, 5, 0)
            AnchorLayout:
                anchor_x: "left"
                anchor_y: "center"
                size_hint_x: None
                width: 179
                Button:
                    opacity: 0 if orto_car.current_slide == orto_car.slides[0] else 1
                    #text: "Previous"
                    border: 0,0,0,0
                    size_hint_y: None
                    height: 40
                    background_normal: "data/backgrounds/previous_slide.png"
                    disabled: True if orto_car.current_slide == orto_car.slides[0] else False
                    on_release: orto_car.load_previous()

            AnchorLayout:
                anchor_y: "center"
                anchor_x: "center"
                BoxLayout:
                    size_hint_x: None
                    padding: 5
                    spacing: 5
                    width: 135

            AnchorLayout:
                anchor_x: "right"
                anchor_y: "center"
                size_hint_x: None
                width: 179
                Button:
                    border: 0,0,0,0
                    #text: "Orthology results"
                    #bold: True
                    size_hint_y: None
                    height: 40
                    opacity: 0 if orto_car.current_slide == orto_car.slides[1] else 1
                    disabled: True if orto_car.current_slide == orto_car.slides[1] else False
                    background_normal: "data/backgrounds/next_slide.png"
                    on_release: orto_car.load_next()

        ScrollView:
            Carousel:
                direction: "right"
                id: orto_car

                BoxLayout:
                    orientation: "vertical"
                    ScrollView:
                        id: orto_search_sv
                        scroll_type: ["bars"]

                        GridLayout:
                            id: gl_orto_search
                            cols: 1
                            padding: (5,5)
                            size_hint_y: None
                            height: sum([x.size[1] for x in self.children])

                            LightBox:
                                padding: 5
                                Label:
                                    text: "General options"
                                    bold: True
                                    halign: "center"
                                    valign: "middle"
                                    text_size: self.size
                                    size_hint_x: .8

                            DarkBox:
                                Label:
                                    size_hint_x: .8
                                    markup: True
                                    text: "[size=18][b]MySQL settings[/b][/size]\n[size=13]Provide the required information to access and modify SQL databases[/size]"
                                    halign: "left"
                                    valign: "middle"
                                    text_size: self.size
                                ProcessBt:
                                    id: mysql_bt
                                    size_hint_x: .2
                                    text: "Select..."
                                    on_release:
                                        app.dialog_mysql()

                            Hseparator

                            DarkBox:
                                id: dark_l
                                Label:
                                    id: output_label
                                    size_hint_x: .8
                                    markup: True
                                    text: "[size=18][b]Threads[/b][/size]\n[size=13]Number of threads (CPU's) to use during USEARCH[/size]"
                                    halign: "left"
                                    valign: "middle"
                                    text_size: self.size
                                Spinner:
                                    id: usearch_threads
                                    background_normal: "data/backgrounds/bt_process.png"
                                    bold: True
                                    values: tuple(str(x) for x in range(1, multiprocessing.cpu_count() + 1))
                                    size_hint_x: .2
                                    text: "1"

                            Hseparator

                            DarkBox:
                                height: 70
                                Label:
                                    id: output_label
                                    size_hint_x: .8
                                    markup: True
                                    text: "[size=18][b]Ortholog filters[/b][/size]\n[size=13]Set the maximum number of gene copies and minimum number of species represented per ortholog cluster[/size]"
                                    halign: "left"
                                    valign: "middle"
                                    text_size: self.size
                                BoxLayout:
                                    size_hint_x: .2
                                    padding: (0,7.5,0,7.5)
                                    ProcessBt:
                                        id: orto_dir
                                        text: "Set filters"
                                        on_release:
                                            app.dialog_ortho_filter()

                            Hseparator

                            DarkBox:
                                Label:
                                    id: output_label
                                    size_hint_x: .8
                                    markup: True
                                    text: "[size=18][b]Output directry[/b][/size]\n[size=13]Save output files to...[/size]"
                                    halign: "left"
                                    valign: "middle"
                                    text_size: self.size
                                ProcessBt:
                                    id: orto_dir
                                    text: "Select..."
                                    on_release:
                                        app.dialog_filechooser("ortho_dir")

                            BoxLayout:
                                size_hint_y: None
                                height: 60
                                AnchorLayout:
                                    Button:
                                        bold: True
                                        id: adv_search_options
                                        text: "Show additional options"
                                        size_hint: None, None
                                        width: 300
                                        height: 40
                                        on_release:
                                            app.toggle_orto_soptions()

                    ScrollView:
                        size_hint_y: None
                        height: 65
                        canvas.before:
                            Color:
                                rgba: (.3,.3,.3,.3)
                            Rectangle:
                                pos: self.pos
                                size: self.size
                        BoxLayout:
                            padding: 10
                            spacing: 10
                            ExecutionBt:
                                id: execute
                                text: "Search Orthologs"
                                on_release:
                                    app.dialog_orto_execution()
                            ExecutionBt:
                                text: "View Queue"
                                id: queue_bt
                                on_release:
                                    app.save_operation_queue()
                                    app.go_carousel(2, "queue")
                                    app.toggle_sidepanel()
                            ExecutionBt:
                                text: "Clear Options"
                                on_release:

                BoxLayout:
                    orientation: "vertical"
                    ScrollView:
                        id: orto_process_sv

                        BoxLayout:
                            orientation: "vertical"
                            padding: (5,5)

                            BoxLayout:
                                size_hint_y: None
                                height: 40
                                AnchorLayout:
                                    anchor_y: "center"
                                    anchor_x: "center"
                                    LightBox:
                                        padding: 5
                                        Label:
                                            text: "Orthology search results"
                                            bold: True
                                            halign: "center"
                                            valign: "middle"
                                            text_size: self.size
                                AnchorLayout:
                                    anchor_x: "right"
                                    anchor_y: "center"
                                    size_hint_x: None
                                    padding: (0,0,10,0)
                                    canvas.before:
                                        Color:
                                            rgba: (.3, .3, .3, .8)
                                        Rectangle:
                                            pos: self.pos
                                            size: self.size
                                    Button:
                                        size_hint: None, None
                                        size: (160,30)
                                        text: "Import group file(s)"
                                        bold: True
                                        background_normal: "data/backgrounds/bt_process.png"

                            BoxLayout:
                                BoxLayout:
                                    size_hint_x: None
                                    width: 220
                                    padding: 10
                                    spacing: 10
                                    orientation: "vertical"
                                    BoxLayout
                                        size_hint_y: None
                                        height: 150
                                        orientation: "vertical"
                                        Label:
                                            size_hint_y: None
                                            height: 30
                                            text: "Group file(s)"
                                            halign: "center"
                                            valign: "middle"
                                            text_size: self.size
                                            bold: True
                                            color: (0.216, 0.67, 0.784, 1)
                                        Hseparator:
                                            thickness: 1.5
                                        ScrollView:
                                    Button
                                    Button
                                    Button
                                ScrollView:
                                    id: par
                                    ScatterLayout:
                                        do_rotation: False
                                        Label:
                                            halign: "center"
                                            valign: "middle"
                                            text_size: self.size
                                            bold: True
                                            text: "An overview of the Orthology search results will be displayed here"
                                            color: (.7,.7,.7,1)
