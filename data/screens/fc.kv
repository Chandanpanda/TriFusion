ShowcaseScreen:
    name: "fc"

    BoxLayout:
        orientation: "horizontal"

        BoxLayout:
            size_hint_x: None
            width: 250
            orientation: "vertical"
            padding: 10
            spacing: 10

            BoxLayout:
                size_hint_y: None
                height: 40
                canvas.before:
                    Color:
                        rgba: (0.3, 0.3, 0.3, .8)
                    Rectangle:
                        pos: self.pos
                        size: self.size
                Label:
                    text: " My Computer"
                    bold: True
                    halign: "center"
                    valign: "middle"
                    text_size: self.size
                    font_size: 18
            ScrollView:
                size_hint_y: None
                height: sum([x.height + 10 for x in sv_mycomp.children]) if sum([x.height + 10 for x in sv_mycomp.children]) < 350 else 350
                GridLayout:
                    size_hint_y: None
                    height: sum([x.height + 10 for x in self.children])
                    cols: 1
                    id: sv_mycomp
                    orientation: "vertical"
                    padding: 5
                    spacing: [10, 10]

            BoxLayout:
                size_hint_y: None
                height: 40
                canvas.before:
                    Color:
                        rgba: (0.3, 0.3, 0.3, .8)
                    Rectangle:
                        pos: self.pos
                        size: self.size
                Label:
                    text: " Bookmarks"
                    bold: True
                    halign: "center"
                    valign: "middle"
                    text_size: self.size
                    font_size: 18

                AnchorLayout:
                    size_hint: None, None
                    size: 40, 40
                    Button:
                        size_hint: None, None
                        size: 30, 30
                        background_normal: "data/backgrounds/add_bt30.png"
                        on_release: app.save_bookmark(icon_view_tab.path, sv_book, icon_view_tab)
            ScrollView:
                GridLayout:
                    size_hint_y: None
                    height: sum([x.height + 10 for x in self.children]) / 2
                    cols: 2
                    id: sv_book
                    orientation: "vertical"
                    padding: 5
                    spacing: [10, 10]

        Vseparator:
            thickness: 1.5

        BoxLayout:
            size_hint_x: .75
            orientation: "vertical"
            padding: 10
            spacing: 10

            BoxLayout:
                orientation: "vertical"
                size_hint_y: None
                height: 65
                Label:
                    bold: True
                    text: "Input data type"
                    halign: "left"
                    valign: "middle"
                    text_size: self.size
                    color: (0.216, 0.67, 0.784, 1)

                BoxLayout:
                    spacing: 10
                    FileTypeBt:
                        id: aln_type
                        text: "Alignment/Sequence set"
                        state: "down"
                        disabled: True
                    FileTypeBt:
                        id: prot_type
                        text: "Proteome"

            Hseparator:
                thickness: 1.5

            BoxLayout:
                spacing: 2
                size_hint_y: None
                height: 30
                spacing: 5
                ToggleButton:
                    id: path_toggle
                    border: (0,0,0,0)
                    background_normal: "data/backgrounds/path_off.png"
                    background_down: "data/backgrounds/path_on.png"
                    size_hint_x: None
                    width: 30
                    on_release:
                        if self.state == "down": app.switch_path_wgt("text", path_bx, icon_view_tab)
                        if self.state == "normal": app.switch_path_wgt("label", path_bx, icon_view_tab)
                BoxLayout:
                    id: path_bx
                    PathLabel:
                        text: icon_view_tab.path
                Button:
                    size_hint_x: None
                    width: 30
                    background_normal: "data/backgrounds/up_dir_bt.png"
                    background_down: "data/backgrounds/up_dir_bt.png"
                    on_release:
                        icon_view_tab.path = os.path.abspath(os.path.join(icon_view_tab.path, os.path.pardir))
                Button:
                    id: clear_s
                    text: "Clear Selection"
                    size_hint_x: None
                    width: 125
                    bold: True
                    background_normal: "data/backgrounds/bt_process.png"
                    on_release: icon_view_tab.selection = []

            FileChooserM:
                id: icon_view_tab
                dirselect: True
                multiselect: True
                f: "/*"
                filters: [self.path+self.f]
                filter_dirs: True
                on_dir_entry:
                    text_filter.text = ""

            BoxLayout:
                size_hint_y: None
                height: 30
                spacing: 5

                Label:
                    size_hint_x: None
                    width: 50
                    text: "Find:"
                    bold: True
                TGToggleButton:
                    id: case_bt
                    text: "Aa"
                    bold:True
                    size_hint_x: None
                    size: 40, 30
                    state: "down"

                TextInput:
                    id: text_filter
                    multiline: False
                    on_text:
                        if case_bt.state == "down": root.ids.icon_view_tab.f = "*"+"".join(["["+x.upper()+x.lower()+"]" for x in self.text])+"*"
                        if case_bt.state == "normal": root.ids.icon_view_tab.f = "*"+self.text+"*"

                    on_text_validate:
                        focus = True

            BoxLayout:
                size_hint_y: None
                height: 40
                spacing: 15

                TFOKButon:
                    id: open_close_bt
                    text: "Open and Close"
                    background_normal: "data/backgrounds/bt_process.png"
                    background_down: "data/backgrounds/bt_process_off.png"
                    on_release:
                        if icon_view_tab.selection and aln_type.state == "down": \
                        app.load_files_subproc(icon_view_tab.selection); app.go_previous_screen()
                        if icon_view_tab.selection and prot_type.state == "down": \
                        app.load_proteomes(icon_view_tab.selection); app.go_previous_screen()

                TFOKButon:
                    id: open_bt
                    text: "Open"
                    on_release:
                        if icon_view_tab.selection and aln_type.state == "down": app.load_files_subproc(icon_view_tab.selection)
                        if icon_view_tab.selection and prot_type.state == "down": app.load_proteomes(icon_view_tab.selection)

                TFOKButon:
                    id: cancel_bt
                    text: "Cancel"
                    on_release: app.go_previous_screen()
