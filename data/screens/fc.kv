ShowcaseScreen:
    name: "fc"

    BoxLayout:
        orientation: "horizontal"

        BoxLayout:
            size_hint_x: None
            width: 250
            orientation: "vertical"
            padding: 10
            spacing: 10

            Label:
                text: " Bookmarks"
                bold: True
                size_hint_y: None
                height: 40
                halign: "center"
                valign: "middle"
                text_size: self.size
                font_size: 18
                canvas.before:
                    Color:
                        rgba: (0.3, 0.3, 0.3, .8)
                    Rectangle:
                        pos: self.pos
                        size: self.size

            ScrollView:
                GridLayout:
                    size_hint_y: None
                    height: sum([x.height + 10 for x in self.children]) / 2
                    cols: 2
                    id: sv_book
                    orientation: "vertical"
                    spacing: [5, 10]

            BoxLayout:
                size_hint_y: None
                height: 30
                AnchorLayout:
                    Button:
                        id: add_bk_bt
                        bold: True
                        width: 100
                        text: "Add Bookmark"
                        background_normal: "data/backgrounds/bt_process.png"
                        on_release: app.save_bookmark(icon_view_tab.path)

        Vseparator:
            thickness: 1.5

        BoxLayout:
            size_hint_x: .75
            orientation: "vertical"
            padding: 10
            spacing: 10

            BoxLayout:
                orientation: "vertical"
                size_hint_y: None
                height: 65
                Label:
                    bold: True
                    text: "Input data type"
                    halign: "left"
                    valign: "middle"
                    text_size: self.size
                    color: (0.216, 0.67, 0.784, 1)

                BoxLayout:
                    spacing: 10
                    FileTypeBt:
                        id: aln_type
                        text: "Alignment/Sequence set"
                        state: "down"
                    FileTypeBt:
                        id: prot_type
                        text: "Proteome"

            Hseparator:
                thickness: 1.5

            BoxLayout:
                spacing: 2
                size_hint_y: None
                height: 30
                spacing: 5
                ToggleButton:
                    id: path_toggle
                    border: (0,0,0,0)
                    background_normal: "data/backgrounds/path_off.png"
                    background_down: "data/backgrounds/path_on.png"
                    size_hint_x: None
                    width: 30
                    on_release:
                        if self.state == "down": app.switch_path_wgt("text")
                        if self.state == "normal": app.switch_path_wgt("label")
                BoxLayout:
                    id: path_bx
                    PathLabel

            FileChooserM:
                id: icon_view_tab
                multiselect: True
                f: "/*"
                filters: [self.path+self.f]
                filter_dirs: True

            BoxLayout:
                size_hint_y: None
                height: 30
                spacing: 5

                Label:
                    canvas.before:
                        Color:
                            rgba: (.2,.2,.2,1)
                        Rectangle:
                            pos: self.pos
                            size: self.size
                    size_hint_x: .15
                    text: "Find:"
                    bold: True
                ToggleButton:
                    id: case_bt
                    text: "Aa"
                    bold:True
                    size_hint_x: .1
                    state: "down"

                TextInput:
                    id: text_filter
                    multiline: False
                    focus: True
                    on_text:
                        if case_bt.state == "down": root.ids.icon_view_tab.f = "*"+"".join(["["+x.upper()+x.lower()+"]" for x in self.text])+"*"
                        if case_bt.state == "normal": root.ids.icon_view_tab.f = "*"+self.text+"*"

                    on_text_validate:
                        focus = True

            BoxLayout:
                size_hint_y: None
                height: 40
                #padding: 10
                spacing: 15

                Button:
                    id: open_bt
                    text: "Open"
                    background_normal: "data/backgrounds/bt_process.png"
                    background_down: "data/backgrounds/bt_process_off.png"
                    bold: True
                    on_release:
                        if icon_view_tab.selection and aln_type.state == "down": app.load_files_subproc(icon_view_tab.selection); app.go_previous_screen()
                        if icon_view_tab.selection and prot_type.state == "down": app.load_proteomes(icon_view_tab.selection); app.go_previous_screen()

                Button:
                    id: cancel_bt
                    text: "Cancel"
                    background_normal: "data/backgrounds/bt_process_off.png"
                    background_down: "data/backgrounds/bt_process.png"
                    bold: True
                    on_release: app.go_previous_screen()

                Button:
                    id: clear_bt
                    text: "Clear selection"
                    background_normal: "data/backgrounds/bt_process_off.png"
                    background_down: "data/backgrounds/bt_process.png"
                    bold: True
                    on_release: icon_view_tab.selection = []
